pipeline {
    agent {
        node {
            label "test"
        }
    }
    environment {
        dotnet = "C:\\Program Files\\dotnet\\dotnet.exe"
    }
    stages {
        stage("Restore") {
            steps {
                bat "dotnet restore"
            }
        }
        stage("Clean") {
            steps {
                bat "dotnet clean"
            }
        }
        stage("Test") {
            steps {
                echo "Test"
            }
        }
        stage("Build") {
            steps {
                bat "dotnet build"
            }
        }
        stage("Build Image") {
            steps {
                echo "Dockerize"
                echo "${pwd()}"
            }
        }
        stage("Clean WS") {
            steps {
                cleanWs()
            }
        }
    }
}